add_custom_target(CopyScenes ALL COMMAND /usr/bin/cp ${CMAKE_BINARY_DIR}/scenes/*.so ${CMAKE_SOURCE_DIR}/scenes/bin)

file(GLOB SCENES "*.cpp")
foreach(SCENE ${SCENES})
    string(REPLACE ".cpp" "" SCENE_N2 ${SCENE})
    get_filename_component(SCENE_N ${SCENE_N2} NAME)
    add_library(${SCENE_N} SHARED ${SCENE})
    target_link_libraries(${SCENE_N} glad GL glfw IMGUI OGL)
    add_dependencies(${SCENE_N} OGL)
    set_target_properties(${SCENE_N} PROPERTIES PREFIX "")
    add_dependencies(CopyScenes ${SCENE_N})
endforeach(SCENE ${SCENES})
